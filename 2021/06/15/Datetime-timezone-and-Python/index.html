<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 5.4.0">


  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">



<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5.15.3/css/all.min.css">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/animate.css@3.1.1/animate.min.css">

<script class="next-config" data-name="main" type="application/json">{&quot;hostname&quot;:&quot;elitegoblin.github.io&quot;,&quot;root&quot;:&quot;&#x2F;&quot;,&quot;images&quot;:&quot;&#x2F;images&quot;,&quot;scheme&quot;:&quot;Muse&quot;,&quot;version&quot;:&quot;8.4.0&quot;,&quot;exturl&quot;:false,&quot;sidebar&quot;:{&quot;position&quot;:&quot;left&quot;,&quot;display&quot;:&quot;post&quot;,&quot;padding&quot;:18,&quot;offset&quot;:12},&quot;copycode&quot;:false,&quot;bookmark&quot;:{&quot;enable&quot;:false,&quot;color&quot;:&quot;#222&quot;,&quot;save&quot;:&quot;auto&quot;},&quot;fancybox&quot;:false,&quot;mediumzoom&quot;:false,&quot;lazyload&quot;:false,&quot;pangu&quot;:false,&quot;comments&quot;:{&quot;style&quot;:&quot;tabs&quot;,&quot;active&quot;:null,&quot;storage&quot;:true,&quot;lazyload&quot;:false,&quot;nav&quot;:null},&quot;motion&quot;:{&quot;enable&quot;:true,&quot;async&quot;:false,&quot;transition&quot;:{&quot;post_block&quot;:&quot;fadeIn&quot;,&quot;post_header&quot;:&quot;fadeInDown&quot;,&quot;post_body&quot;:&quot;fadeInDown&quot;,&quot;coll_header&quot;:&quot;fadeInLeft&quot;,&quot;sidebar&quot;:&quot;fadeInUp&quot;}},&quot;prism&quot;:false,&quot;i18n&quot;:{&quot;placeholder&quot;:&quot;搜索...&quot;,&quot;empty&quot;:&quot;没有找到任何搜索结果：${query}&quot;,&quot;hits_time&quot;:&quot;找到 ${hits} 个搜索结果（用时 ${time} 毫秒）&quot;,&quot;hits&quot;:&quot;找到 ${hits} 个搜索结果&quot;}}</script>
<meta name="description" content="Preface写server程序，datetime是绕不开的话题，且经常需要处理多时区转换，时间的术语和格式让人眼花缭乱, 如   UNIX time, epoch  datetime string: 1990-12-31T23:59:60Z, 1990-12-31T15:59:60-08:00  UTC, GMT, Zulu time  DST: daylight saving time">
<meta property="og:type" content="article">
<meta property="og:title" content="Datetime, timezone and Python">
<meta property="og:url" content="https://elitegoblin.github.io/2021/06/15/Datetime-timezone-and-Python/index.html">
<meta property="og:site_name" content="Frank Sun&#39;s Tech Blog">
<meta property="og:description" content="Preface写server程序，datetime是绕不开的话题，且经常需要处理多时区转换，时间的术语和格式让人眼花缭乱, 如   UNIX time, epoch  datetime string: 1990-12-31T23:59:60Z, 1990-12-31T15:59:60-08:00  UTC, GMT, Zulu time  DST: daylight saving time">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://raw.githubusercontent.com/eliteGoblin/images/master/blog/img/picgo/20210618084911.png">
<meta property="og:image" content="https://upload.wikimedia.org/wikipedia/commons/3/32/Earth_rotation.gif">
<meta property="og:image" content="https://raw.githubusercontent.com/eliteGoblin/images/master/blog/img/picgo/20210617084340.png">
<meta property="og:image" content="https://raw.githubusercontent.com/eliteGoblin/images/master/blog/img/picgo/20210617084457.png">
<meta property="og:image" content="https://raw.githubusercontent.com/eliteGoblin/images/master/blog/img/picgo/20210617085332.png">
<meta property="og:image" content="https://upload.wikimedia.org/wikipedia/commons/6/61/AxialTiltObliquity.png">
<meta property="og:image" content="https://raw.githubusercontent.com/eliteGoblin/images/master/blog/img/picgo/20210617075335.png">
<meta property="og:image" content="https://raw.githubusercontent.com/eliteGoblin/images/master/blog/img/picgo/20210617092303.png">
<meta property="og:image" content="https://raw.githubusercontent.com/eliteGoblin/images/master/blog/img/picgo/20210617093049.png">
<meta property="og:image" content="https://raw.githubusercontent.com/eliteGoblin/images/master/blog/img/picgo/20210617162023.png">
<meta property="og:image" content="https://raw.githubusercontent.com/eliteGoblin/images/master/blog/img/picgo/20210618071755.png">
<meta property="article:published_time" content="2021-06-15T22:32:37.000Z">
<meta property="article:modified_time" content="2021-06-17T22:49:27.021Z">
<meta property="article:author" content="eliteGoblin">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://raw.githubusercontent.com/eliteGoblin/images/master/blog/img/picgo/20210618084911.png">


<link rel="canonical" href="https://elitegoblin.github.io/2021/06/15/Datetime-timezone-and-Python/">



<script class="next-config" data-name="page" type="application/json">{&quot;sidebar&quot;:&quot;&quot;,&quot;isHome&quot;:false,&quot;isPost&quot;:true,&quot;lang&quot;:&quot;zh-CN&quot;,&quot;comments&quot;:true,&quot;permalink&quot;:&quot;https:&#x2F;&#x2F;elitegoblin.github.io&#x2F;2021&#x2F;06&#x2F;15&#x2F;Datetime-timezone-and-Python&#x2F;&quot;,&quot;path&quot;:&quot;2021&#x2F;06&#x2F;15&#x2F;Datetime-timezone-and-Python&#x2F;&quot;,&quot;title&quot;:&quot;Datetime, timezone and Python&quot;}</script>

<script class="next-config" data-name="calendar" type="application/json">&quot;&quot;</script>
<title>Datetime, timezone and Python | Frank Sun's Tech Blog</title><script src="/js/config.js"></script>
  




  <noscript>
    <link rel="stylesheet" href="/css/noscript.css">
  </noscript>
</head>

<body itemscope itemtype="http://schema.org/WebPage" class="use-motion">
  <div class="headband"></div>

  <main class="main">
    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="切换导航栏" role="button">
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <i class="logo-line"></i>
      <h1 class="site-title">Frank Sun's Tech Blog</h1>
      <i class="logo-line"></i>
    </a>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
    </div>
  </div>
</div>



<nav class="site-nav">
  <ul class="main-menu menu">
        <li class="menu-item menu-item-home"><a href="/" rel="section"><i class="home fa-fw"></i>首页</a></li>
        <li class="menu-item menu-item-categories"><a href="/categories/" rel="section"><i class="th fa-fw"></i>分类</a></li>
        <li class="menu-item menu-item-tags"><a href="/tags/" rel="section"><i class="tags fa-fw"></i>标签</a></li>
        <li class="menu-item menu-item-archives"><a href="/archives/" rel="section"><i class="archive fa-fw"></i>归档</a></li>
        <li class="menu-item menu-item-about"><a href="/about/" rel="section"><i class="user fa-fw"></i>关于</a></li>
  </ul>
</nav>




</div>
        
  
  <div class="toggle sidebar-toggle" role="button">
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
  </div>

  <aside class="sidebar">

    <div class="sidebar-inner sidebar-nav-active sidebar-toc-active">
      <ul class="sidebar-nav">
        <li class="sidebar-nav-toc">
          文章目录
        </li>
        <li class="sidebar-nav-overview">
          站点概览
        </li>
      </ul>

      <div class="sidebar-panel-container">
        <!--noindex-->
        <div class="post-toc-wrap sidebar-panel">
            <div class="post-toc animated"><ol class="nav"><li class="nav-item nav-level-2"><a class="nav-link" href="#Preface"><span class="nav-number">1.</span> <span class="nav-text">Preface</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Background"><span class="nav-number">2.</span> <span class="nav-text">Background</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%97%A0%E6%AD%A7%E4%B9%89%E7%9A%84%E6%97%B6%E9%97%B4-UTC-GMT-UNIX-time"><span class="nav-number">3.</span> <span class="nav-text">无歧义的时间: UTC, GMT, UNIX time</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Timezones%E7%9B%B8%E5%85%B3%E5%9C%B0%E7%90%86%E7%9F%A5%E8%AF%86"><span class="nav-number">4.</span> <span class="nav-text">Timezones相关地理知识</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Timezone%E7%9A%84%E5%88%92%E5%88%86"><span class="nav-number">5.</span> <span class="nav-text">Timezone的划分</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%97%B6%E5%8C%BA%E4%B8%8E%E7%BB%8F%E5%BA%A6"><span class="nav-number">5.1.</span> <span class="nav-text">时区与经度</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E7%BB%8F%E5%BA%A6%E5%8F%96%E5%80%BC%E8%8C%83%E5%9B%B4"><span class="nav-number">5.2.</span> <span class="nav-text">经度取值范围</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%9B%BD%E9%99%85%E6%97%A5%E6%9C%9F%E5%8F%98%E6%9B%B4%E7%BA%BF"><span class="nav-number">5.3.</span> <span class="nav-text">国际日期变更线</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Time-standards"><span class="nav-number">6.</span> <span class="nav-text">Time standards</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#RFC-3339"><span class="nav-number">7.</span> <span class="nav-text">RFC 3339</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Timezone-name-%E4%B8%8E-Daylight-saving"><span class="nav-number">8.</span> <span class="nav-text">Timezone name 与 Daylight saving</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Datetime-in-Python"><span class="nav-number">9.</span> <span class="nav-text">Datetime in Python</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#Construct-a-Arrow-object"><span class="nav-number">9.1.</span> <span class="nav-text">Construct a Arrow object</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Convert-between-timezones"><span class="nav-number">9.2.</span> <span class="nav-text">Convert between timezones</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Parse-and-format-using-custom-format"><span class="nav-number">9.3.</span> <span class="nav-text">Parse and format using custom format</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Get-datetime-properties"><span class="nav-number">9.4.</span> <span class="nav-text">Get datetime properties</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Replace-some-field-and-shift"><span class="nav-number">9.5.</span> <span class="nav-text">Replace some field and shift</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Span-and-range-of-times"><span class="nav-number">9.6.</span> <span class="nav-text">Span and range of times</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Ref"><span class="nav-number">10.</span> <span class="nav-text">Ref</span></a></li></ol></div>
        </div>
        <!--/noindex-->

        <div class="site-overview-wrap sidebar-panel">
          <div class="site-author site-overview-item animated" itemprop="author" itemscope itemtype="http://schema.org/Person">
  <p class="site-author-name" itemprop="name">eliteGoblin</p>
  <div class="site-description" itemprop="description">拒绝复制,经过思考后的总结才属于自己</div>
</div>
<div class="site-state-wrap site-overview-item animated">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
          <a href="/archives/">
        
          <span class="site-state-item-count">49</span>
          <span class="site-state-item-name">日志</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
            <a href="/categories/">
          
        <span class="site-state-item-count">1</span>
        <span class="site-state-item-name">分类</span></a>
      </div>
      <div class="site-state-item site-state-tags">
            <a href="/tags/">
          
        <span class="site-state-item-count">49</span>
        <span class="site-state-item-name">标签</span></a>
      </div>
  </nav>
</div>
  <div class="links-of-author site-overview-item animated">
      <span class="links-of-author-item">
        <a href="https://github.com/eliteGoblin" title="GitHub → https:&#x2F;&#x2F;github.com&#x2F;eliteGoblin" rel="noopener" target="_blank"><i class="fab fa-github fa-fw"></i>GitHub</a>
      </span>
  </div>



        </div>
      </div>
    </div>
  </aside>
  <div class="sidebar-dimmer"></div>


    </header>

    
  <div class="back-to-top" role="button" aria-label="返回顶部">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>

<noscript>
  <div class="noscript-warning">Theme NexT works best with JavaScript enabled</div>
</noscript>


    <div class="main-inner post posts-expand">


  


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://elitegoblin.github.io/2021/06/15/Datetime-timezone-and-Python/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="eliteGoblin">
      <meta itemprop="description" content="拒绝复制,经过思考后的总结才属于自己">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Frank Sun's Tech Blog">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          Datetime, timezone and Python
        </h1>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2021-06-16 06:32:37" itemprop="dateCreated datePublished" datetime="2021-06-16T06:32:37+08:00">2021-06-16</time>
    </span>
      <span class="post-meta-item">
        <span class="post-meta-item-icon">
          <i class="far fa-calendar-check"></i>
        </span>
        <span class="post-meta-item-text">更新于</span>
        <time title="修改时间：2021-06-18 06:49:27" itemprop="dateModified" datetime="2021-06-18T06:49:27+08:00">2021-06-18</time>
      </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
        <img src="https://raw.githubusercontent.com/eliteGoblin/images/master/blog/img/picgo/20210618084911.png" alt="20210618084911" style="width:500px"/> 

<h2 id="Preface"><a href="#Preface" class="headerlink" title="Preface"></a>Preface</h2><p>写server程序，datetime是绕不开的话题，且经常需要处理多时区转换，时间的术语和格式让人眼花缭乱, 如</p>
<ul>
<li> UNIX time, epoch</li>
<li> datetime string: <code>1990-12-31T23:59:60Z</code>, <code>1990-12-31T15:59:60-08:00</code></li>
<li> UTC, GMT, Zulu time</li>
<li> DST: daylight saving time</li>
<li> Timezone name 如<code>AEST</code>, <code>AEDT</code></li>
<li> Timezone name又如 “Australia/Sydney”</li>
<li> 时区与longitude的关系</li>
<li> ISO 8601, RFC 3339</li>
</ul>
<p>需要系统梳理时间标准，术语; 这就需要对背后的地理知识稍作了解. </p>
<p>另外给出如何用Python的<code>Arrow</code> package实现常用的时间/时区操作. </p>
<span id="more"></span>

<h2 id="Background"><a href="#Background" class="headerlink" title="Background"></a>Background</h2><p>生活总我们提到的时间多为当地时间: 如写本文时，身在悉尼，当地时间为: <code>Thu 17 Jun 2021 07:58:48</code>; 但在同一时刻，北京时间为<code>Thu 17 Jun 2021 05:58:48</code>, 即北京时间落后于悉尼时间2h. </p>
<p>日常电子设备，操作系统的时间一般设置为当地时间，方便使用。可见，除了具体的Year, Month, Day, Hour, Minute; 我们还需要location信息，才能唯一的标定一个时间。</p>
<h2 id="无歧义的时间-UTC-GMT-UNIX-time"><a href="#无歧义的时间-UTC-GMT-UNIX-time" class="headerlink" title="无歧义的时间: UTC, GMT, UNIX time"></a>无歧义的时间: UTC, GMT, UNIX time</h2><p>为了解决同样的datetime string在不同location, 代表的绝对时刻不一致的问题; 同时为了方便我们在不同location之间转换，我们需要有一个”标准”的location作为参照，即UTC时间(后续阐述其由来)。</p>
<p>只要知道身处何地，当地时间都能转换为UTC时间; 这样有了一致的标准，不同location的当地时间就能互相转换了。</p>
<p>例如: 北京时间比UTC时间提前8hr, 悉尼时间比UTC时间提前10hr(当前为冬令时, 后续会讲到), 因此悉尼时间比北京提前2hr.</p>
<p>Note: </p>
<ul>
<li> 时间提前/落后: 这里表示同一时刻，北京时间的显示比悉尼时间小/落后，北京时间落后于悉尼时间2h, 针对同一时刻. 即从悉尼打电话到北京，发现北京时间”慢”2小时</li>
<li> 以上又意味着北京将比悉尼晚2小时见到太阳</li>
</ul>
<p>UTC时间取自Greenwich时间，位于伦敦; 因此Greenwich Mean Time与UTC相等; 军用的Zulu time也与UTC相等, 即: </p>
<blockquote>
<p>UTC == GMT == Zulu time</p>
</blockquote>
<p>编程时常用的UNIX Time也是基于UTC的: </p>
<blockquote>
<p>Unix time (also known as Epoch time, POSIX time, seconds since the Epoch or UNIX Epoch time)</p>
</blockquote>
<blockquote>
<p>It is the number of seconds that have elapsed since the Unix epoch, minus leap seconds; the Unix epoch is 00:00:00 UTC on 1 January 1970</p>
</blockquote>
<p>可见，UNIX time可以无歧义的表示某一时刻，因为它的标准化属性，计算机系统内部存储常用它. </p>
<h2 id="Timezones相关地理知识"><a href="#Timezones相关地理知识" class="headerlink" title="Timezones相关地理知识"></a>Timezones相关地理知识</h2><p>如果想进一步理解UTC的由来，标准时区的划分，需要review一些地理知识: </p>
<p>首先地球在不停的自传, 考虑自转时太阳可视为基本不动</p>
<img src="https://upload.wikimedia.org/wikipedia/commons/3/32/Earth_rotation.gif" alt="20210617075335" style="width:500px"/>

<p>自转时时而面对太阳，时而背对太阳; 因此地球上的每个location都会依次经历 日出-&gt;日落-&gt;日出-&gt;…, 循环往复. </p>
<p>时区的划分与自转紧密相关。还记得地理课的”口诀”吗? 地球自西向东转动; 东西是怎么来的呢？ 东西方向感觉是相对的，为什么一个地方的东西南北方向是确定的，没有歧义呢? </p>
<p>首先东西方向随地球的自转: <strong>东代表日出，西代表日落</strong>, 即太阳从东方升起，到西方落下，这种约定在任何地方都是一样的;  </p>
<p>东西方向确定后，南北自然确定，同样遵循约定: : </p>
<blockquote>
<p>east being in the clockwise direction of rotation from north and west being directly opposite east</p>
</blockquote>
<p>即East逆时针转90度就是North, 这就是<a target="_blank" rel="noopener" href="https://en.wikipedia.org/wiki/Cardinal_direction">Cardinal direction</a> , 这也是地图口诀”上北下南，左西右东”的由来. 东西定为水平线, X轴; 则南北自然与其垂直的Y轴。</p>
<img src="https://raw.githubusercontent.com/eliteGoblin/images/master/blog/img/picgo/20210617084340.png" alt="20210617084340" style="width:500px"/>  

<p>那为什么地球是<strong>自西向东运动</strong>呢? 下图给出解释:  </p>
<img src="https://raw.githubusercontent.com/eliteGoblin/images/master/blog/img/picgo/20210617084457.png" alt="20210617084457" style="width:500px"/>  

<p>即太阳不动，地球自转，不停的有location见到太阳(日出), Syndey比Beijing先见到，我们就说Sydney在Beijing的东边; 因此自转方向也是自西向东. </p>
<p>上图来自一个很好的回答<a target="_blank" rel="noopener" href="https://earthscience.stackexchange.com/a/13361">Why do we say Earth rotates from west to east?</a></p>
<p>另外理解了东西, 顺便看下Clockwise和counter clockwise; 地球是否顺时针转取决与观察角度，与”自西向东”并无直接关系: 从北极看上去，是逆时针转动; 钻到下面，从南极往”上”看，是顺时针转动: </p>
<img src="https://raw.githubusercontent.com/eliteGoblin/images/master/blog/img/picgo/20210617085332.png" alt="20210617085332" style="width:500px"/>  

<p>附一张地球转动图:</p>
<img src="https://upload.wikimedia.org/wikipedia/commons/6/61/AxialTiltObliquity.png" style="width:500px"/>  


<h2 id="Timezone的划分"><a href="#Timezone的划分" class="headerlink" title="Timezone的划分"></a>Timezone的划分</h2><p>有了以上的地理知识，下图开始make sense: </p>
<img src="https://raw.githubusercontent.com/eliteGoblin/images/master/blog/img/picgo/20210617075335.png" alt="20210617075335" style="width:500px"/>  

<p>地球经度360度，一天24小时; 为方便时间计算: </p>
<ul>
<li> 设立24个时区，每个时区跨15度</li>
<li> 每个时区对应1小时的时间跨度: 这样环绕地球一周，正好是一天24小时. </li>
<li> 地处同一时区内(15度经度带), 认为时间一致， 为时区标准时间, 即时区中部经度时间为准; 即时区开始经线的7.5度偏移处。</li>
</ul>
<h3 id="时区与经度"><a href="#时区与经度" class="headerlink" title="时区与经度"></a>时区与经度</h3><p>时间与太阳升起有关，因此只与经度: longitude有关. </p>
<p>Prime meridian, 即本初子午线，代表0度经度; 同时将Prime meridian的时间定义为UTC标准时间：即<strong>经度的0与时间的0重合</strong>.</p>
<p>时区0因为中心是longitude 0, 因此纬度范围[-7.5 7.5]; </p>
<p>北京纬度大约为<code>116.3</code>, 落在东八区: [112.5, 127.5]</p>
<p>提到经度就不得不提东西半球的划分: 有了prime meridian, 向东(即地图向右)180度，为东半球; 向左180度为西半球. 东西半球重合于两条经线: prime meridian和antimeridian(位于Pacific Ocean, 线上很少有人居住, 因此用作国际日期变更线); </p>
<p>这大概就是”东方国家”，”西方国家”的由来吧; 虽然地球是个球体，没有绝对的谁先看到太阳，谁后看到; 但以标准0度经线来看，处于东方的中国先见到太阳，因此时间领先于处于西方的美国。而北京(东八区)和纽约(当前西四区)横跨12个时区，正好相差12小时, 昼夜颠倒, 当前:  </p>
<img src="https://raw.githubusercontent.com/eliteGoblin/images/master/blog/img/picgo/20210617092303.png" alt="20210617092303" style="width:500px"/>

<h3 id="经度取值范围"><a href="#经度取值范围" class="headerlink" title="经度取值范围"></a>经度取值范围</h3><p>有了Prime meridian, 定义经度范围[-180, +180]: </p>
<blockquote>
<p>Positive longitude is east of the prime meridian, while negative longitude is west of the prime meridian</p>
</blockquote>
<p>E.g: 北京处于东区, 经度约<code>116.3</code>, 为正; 纽约处于西半球, 约<code>-73.9</code>, 为负. 画成坐标，0度经线为Y轴: 0度经线将地球分为东西半球</p>
<img src="https://raw.githubusercontent.com/eliteGoblin/images/master/blog/img/picgo/20210617093049.png" alt="20210617093049" style="width:500px"/>

<p>另一种经度表示, 如 <code>73° 56&#39; 6.8712&#39;&#39;W</code>, 用<code>W</code>代表西半球, 数值永远为正: [0, 180]; 一般地图程序还是用[-180, 180]的多. </p>
<p>维度取值为[-90, 90], 分不清数字对是经纬度还是维经度, 看哪个数字大于90即为经度(当然不是任意lat, lon pair都能分清);   </p>
<p>一般地图多用<code>lat/lon</code>, 如Google地图Beijing坐标<code>@39.9385466,116.1172815</code>. </p>
<h3 id="国际日期变更线"><a href="#国际日期变更线" class="headerlink" title="国际日期变更线"></a>国际日期变更线</h3><p>时区地图是二维平面地图，但地球是球形; 意味着除了Prime Meridian, 还有一处东西时区会”重合”. 即Timezone地图的”东西十二区”. </p>
<p>它是最东的时区，比UTC时间早12小时; 同时它也认为是最西时区，比UTC晚12小时; 如何对待: 分半, 靠东的认为属于东半球的延伸， 领先UTC 12小时; 靠西的认为属于西半球, 落后UTC 12小时; </p>
<p>即同样处于一个15度经度带的不同地方，日期相对标准的UTC可能相差一天! 即有一条虚拟的线存在，两边日期不同. 这正是国际日期变更线: <code>International Date Line</code></p>
<p>为了使不同行政地区不至于相差一天，此线并不是严格划在经度带的中心，而是尽量绕开了不同的行政地区. </p>
<blockquote>
<p>The International Date Line, established in 1884, passes through the mid-Pacific Ocean and roughly follows a 180 degrees longitude north-south line on the Earth. It is located halfway round the world from the prime meridian—the zero degrees longitude established in Greenwich, England, in 1852.  </p>
</blockquote>
<p>上述来自<a target="_blank" rel="noopener" href="https://oceanservice.noaa.gov/facts/international-date-line.html">noaa</a></p>
<p>是一条弯曲的线: </p>
<img src="https://raw.githubusercontent.com/eliteGoblin/images/master/blog/img/picgo/20210617162023.png" alt="20210617162023" style="width:500px"/>  

<p>因此为了简化，东西半球划分更新为: </p>
<blockquote>
<pre><code>area of the Earth east of the prime meridian and west of the International Date Line.
</code></pre>
</blockquote>
<p>即Prime meridian和国际日期变更线划分. </p>
<h2 id="Time-standards"><a href="#Time-standards" class="headerlink" title="Time standards"></a>Time standards</h2><p>有了上节讨论了地理基础, 我们知道地球分为24个时区, 每个时区的标准时间对应为中央经线的时间. </p>
<p>有了标准的时区划分，对于时间日期的文字表示，还要将其标准化，有几个标准:  </p>
<ul>
<li> ISO8601</li>
<li> RFC 2822</li>
<li> RFC 3339</li>
</ul>
<blockquote>
<p>Standards for date and time representation covering the formatting of date and time, and timezone information</p>
</blockquote>
<p>以上3个标准, 即标准化日期，时间和时区表示; 相对于有歧义，不规范的string: <code>2020-09-12 5:20</code>. 甚至<code>199202930201</code>; 我们需要定义标准的格式. </p>
<p><a target="_blank" rel="noopener" href="https://datatracker.ietf.org/doc/html/rfc3339">RFC3339</a>是对前两者的完善, 接下来主要讨论它. </p>
<h2 id="RFC-3339"><a href="#RFC-3339" class="headerlink" title="RFC 3339"></a>RFC 3339</h2><p>直观的看几个符合标准的datetime: </p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># UTC时间, 以Z结尾</span></span><br><span class="line">2019-10-12T07:20:50.52Z</span><br><span class="line"><span class="comment"># AEST时间, +10:00 表示比UTC提前10小时</span></span><br><span class="line">2021-06-17T16:40:02.058752+10:00</span><br><span class="line"><span class="comment"># UTC - 8, PST: Pacific Standard Time</span></span><br><span class="line">1996-12-19T16:39:57-08:00 <span class="comment"># 等价于悉尼时间1996-12-20T11:39:57+11:00, 注意此时间为+11:00, 即悉尼施行夏令时, 不是AEST而采用AEDT.</span></span><br></pre></td></tr></table></figure>

<p>可见: </p>
<ul>
<li>日期以<code>-</code>连接, Year: <ul>
<li> Year: 4 digits</li>
<li> Month: 2 digits</li>
<li> Day: 2 digits</li>
<li> Hour: 2 digits, [00, 23], 不允许24</li>
<li> Min: 2 digits</li>
<li> Sec: 2 digits; 小数点后经度不限</li>
</ul>
</li>
<li> 日期时间必须加<code>T</code></li>
<li>时间最后必须加时区信息: <ul>
<li> <code>Z</code>: Zulu time, == UTC == GMT, 即<code>UTC+0</code>, 或者</li>
<li> <code>+10:00</code>: UTC + 10hr == 当前时间戳; 即当前时间比UTC领先10hr.</li>
</ul>
</li>
</ul>
<p>ISO8601严格的<code>ABNF</code>在此: </p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">date-fullyear   &#x3D; 4DIGIT</span><br><span class="line">date-month      &#x3D; 2DIGIT  ; 01-12</span><br><span class="line">date-mday       &#x3D; 2DIGIT  ; 01-28, 01-29, 01-30, 01-31 based on</span><br><span class="line">                           ; month&#x2F;year</span><br><span class="line">time-hour       &#x3D; 2DIGIT  ; 00-23</span><br><span class="line">time-minute     &#x3D; 2DIGIT  ; 00-59</span><br><span class="line">time-second     &#x3D; 2DIGIT  ; 00-58, 00-59, 00-60 based on leap second</span><br><span class="line">                           ; rules</span><br><span class="line">time-secfrac    &#x3D; &quot;.&quot; 1*DIGIT</span><br><span class="line">time-numoffset  &#x3D; (&quot;+&quot; &#x2F; &quot;-&quot;) time-hour &quot;:&quot; time-minute</span><br><span class="line">time-offset     &#x3D; &quot;Z&quot; &#x2F; time-numoffset</span><br><span class="line"></span><br><span class="line">partial-time    &#x3D; time-hour &quot;:&quot; time-minute &quot;:&quot; time-second</span><br><span class="line">                  [time-secfrac]</span><br><span class="line">full-date       &#x3D; date-fullyear &quot;-&quot; date-month &quot;-&quot; date-mday</span><br><span class="line">full-time       &#x3D; partial-time time-offset</span><br><span class="line"></span><br><span class="line">date-time       &#x3D; full-date &quot;T&quot; full-time</span><br></pre></td></tr></table></figure>

<p>Note: </p>
<ul>
<li> <code>T</code>, <code>Z</code>可为小写</li>
<li> RFC3339, 不一定非要求<code>T</code>, 可以为空格<code> </code>; 这也是RFC3339的format与ISO8601的唯一区别. </li>
</ul>
<h2 id="Timezone-name-与-Daylight-saving"><a href="#Timezone-name-与-Daylight-saving" class="headerlink" title="Timezone name 与 Daylight saving"></a>Timezone name 与 Daylight saving</h2><p>时区虽然有了数字编号, 如UTC+8, UTC-10; </p>
<p>但人们更熟悉名字，因此IANA标准: <a target="_blank" rel="noopener" href="https://www.iana.org/time-zones">Time Zone Database</a> 是将时区命名标准化: 用大城市来代替所属的时区, 在东八区，即我们的北京时间, 北京城市并没有上榜, IANA对应的时区是: <code>Asia/Shanghai</code>, 即<code>CST</code>: <code>China Standard Time</code>. 但我们应该知道它和北京时间是一个时间. </p>
<p>Linux下列出所有IANA timezone names: </p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">timedatectl list-timezones <span class="comment"># 当前共计348个</span></span><br></pre></td></tr></table></figure>

<p>可以看到悉尼时区为: <code>Australia/Sydney</code>, 这个和之前提到的<code>AEST</code>(Australian Eastern Standard Time)和<code>AEDT</code>(Australian Eastern Daylight Time)又有什么关系呢?</p>
<p>这就是Daylight saving. 是当地政府的行为, 一般有季节性. </p>
<p>中国并没有采用Daylight saving机制, 比如一个人起床时间固定在6:00AM, 夏天天已经亮了，但冬天仍很黑. 冬天时钟往后拨一小时(将夏季的7:00AM当做冬季6:00AM), 能让冬天遵循同一时间routine的人多享受一会太阳. </p>
<p>Daylight saving提供额外的好处，势必会带来额外的cost: 同一timezone: 如<code>Australia/Sydney</code>, 冬季夏季对于标准UTC的offset不一致, 冬季采用AEST(UTC +10), 夏季采用AEDT(UTC +11), 因为 <code>localTime = UTC + offset</code>, <code>AEDT</code>的<code>+11</code>, 比<code>AEDT</code>领先1小时, 即更早1小时. </p>
<p>在悉尼，一年有两天变更时间, 家里有挂钟可能需要手动调整(手机软件一般会自动变更)</p>
<img src="https://raw.githubusercontent.com/eliteGoblin/images/master/blog/img/picgo/20210618071755.png" alt="20210618071755" style="width:500px"/>

<p>因此只提到IANA的标准timezone, 如<code>Australia/Sydney</code>， 需要指定日期才能知道对UTC的offset, 但<code>AEST</code>和<code>AEDT</code>没有歧义，它们能得出UTC offset.</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 悉尼，采用AEST时间, 冬季, +10:00 表示比UTC提前10小时</span></span><br><span class="line">2021-06-17T16:40:02.058752+10:00</span><br><span class="line"><span class="comment"># 悉尼, 采用AEDT时间, 夏季</span></span><br><span class="line">1996-12-20T11:39:57+11:00</span><br></pre></td></tr></table></figure>

<h2 id="Datetime-in-Python"><a href="#Datetime-in-Python" class="headerlink" title="Datetime in Python"></a>Datetime in Python</h2><p>个人推荐用<a target="_blank" rel="noopener" href="https://arrow.readthedocs.io/en/latest/">arrow</a>处理datetime, Python自带了一堆package, 用起来比较乱. </p>
<p>Arrow只需要一个package, 且提供了更强大的功能. </p>
<p>使用时，一般先创建<code>arrow.Arrow</code> object, 为无歧义的datetime(timezone awareness, 不允许不带有歧义的时间, timezone不指定默认UTC), 然后用此object进行datetime计算，且可以转为Python自带的datetime, tzinfo等object.</p>
<p>Demo代码见<a target="_blank" rel="noopener" href="https://github.com/eliteGoblin/code_4_blog/blob/master/datetime_python/arrow_demo.py">这里</a>  </p>
<h3 id="Construct-a-Arrow-object"><a href="#Construct-a-Arrow-object" class="headerlink" title="Construct a Arrow object"></a>Construct a Arrow object</h3><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># get now of local time, timezone from system, AEST in my case</span></span><br><span class="line">dt = arrow.now() </span><br><span class="line"><span class="built_in">print</span>(dt.isoformat())       <span class="comment"># 2021-06-18T07:35:21.865380+10:00</span></span><br><span class="line"><span class="comment"># get now of UTC time</span></span><br><span class="line">dt = arrow.utcnow()</span><br><span class="line"><span class="built_in">print</span>(dt.isoformat()) </span><br><span class="line"><span class="comment"># get now of another timezone</span></span><br><span class="line">dt = arrow.now(<span class="string">&#x27;US/Pacific&#x27;</span>)</span><br><span class="line"><span class="comment"># get from ISO 8601 string</span></span><br><span class="line">dt = arrow.get(<span class="string">&#x27;2013-05-11T21:23:58.970460+07:00&#x27;</span>)</span><br><span class="line"><span class="comment"># get as datetime, UTC</span></span><br><span class="line">dt = arrow.get(<span class="number">2013</span>, <span class="number">5</span>, <span class="number">5</span>)  <span class="comment"># 2013-05-05T00:00:00+00:00</span></span><br><span class="line"><span class="comment"># get from UNIX time, to UTC</span></span><br><span class="line">dt = arrow.get(<span class="number">1623966051</span>)</span><br><span class="line"><span class="built_in">print</span>(dt.isoformat())       <span class="comment"># 2021-06-17T21:40:51+00:00, 默认为Timezone为UTC</span></span><br><span class="line"><span class="comment"># get from UNIX time, to local(AEST in my case)</span></span><br><span class="line">dt = arrow.get(<span class="number">1623966051</span>, tzinfo=<span class="string">&#x27;local&#x27;</span>)</span><br><span class="line"><span class="comment"># get from UNIX time, to another timezone, support IANA and abbreviation</span></span><br><span class="line">dt = arrow.get(<span class="number">1623966051</span>, tzinfo=<span class="string">&#x27;AEST&#x27;</span>)</span><br><span class="line"><span class="built_in">print</span>(dt.isoformat())       <span class="comment"># 2021-06-18T07:40:51+10:00</span></span><br><span class="line">dt = arrow.get(<span class="number">1623966051</span>, tzinfo=<span class="string">&#x27;Australia/Sydney&#x27;</span>)</span><br><span class="line"><span class="built_in">print</span>(dt.isoformat())       <span class="comment"># 2021-06-18T07:40:51+10:00</span></span><br></pre></td></tr></table></figure>

<h3 id="Convert-between-timezones"><a href="#Convert-between-timezones" class="headerlink" title="Convert between timezones"></a>Convert between timezones</h3><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">dt = arrow.now() </span><br><span class="line"><span class="built_in">print</span>(dt.to(<span class="string">&#x27;UTC&#x27;</span>).isoformat())                 <span class="comment"># 2021-06-17T21:42:46.497456+00:00</span></span><br><span class="line"><span class="built_in">print</span>(dt.to(<span class="string">&#x27;Australia/Sydney&#x27;</span>).isoformat())    <span class="comment"># 2021-06-18T07:42:46.497456+10:00</span></span><br><span class="line">dt.to(tz.gettz(<span class="string">&#x27;US/Pacific&#x27;</span>)) <span class="comment"># support Python tz package</span></span><br></pre></td></tr></table></figure>

<h3 id="Parse-and-format-using-custom-format"><a href="#Parse-and-format-using-custom-format" class="headerlink" title="Parse and format using custom format"></a>Parse and format using custom format</h3><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># parse from own format, default UTC</span></span><br><span class="line">dt = arrow.get(<span class="string">&#x27;2013-05-05 12:30:45&#x27;</span>, <span class="string">&#x27;YYYY-MM-DD HH:mm:ss&#x27;</span>)</span><br><span class="line"><span class="built_in">print</span>(dt.isoformat())                           <span class="comment"># 2013-05-05T12:30:45+00:00</span></span><br><span class="line"><span class="built_in">print</span>(dt.<span class="built_in">format</span>(<span class="string">&#x27;YYYY-MM-DD HH:mm:ss ZZ&#x27;</span>) )     <span class="comment"># 2013-05-07 05:23:16 -00:00, ZZ代表offset</span></span><br></pre></td></tr></table></figure>

<p><a target="_blank" rel="noopener" href="https://arrow.readthedocs.io/en/latest/#supported-tokens">内置一系列Token来帮助parse及format</a>, 与<a target="_blank" rel="noopener" href="https://linux.die.net/man/3/strptime">Linux strptime</a>的token不一致:  </p>
<p>同时系统另外一些常见的format: </p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">FORMAT_ATOM    FORMAT_RFC1123 FORMAT_RFC822  FORMAT_W3C    </span><br><span class="line">FORMAT_COOKIE  FORMAT_RFC2822 FORMAT_RFC850       </span><br><span class="line">FORMAT_RFC1036 FORMAT_RFC3339 FORMAT_RSS   </span><br></pre></td></tr></table></figure>

<h3 id="Get-datetime-properties"><a href="#Get-datetime-properties" class="headerlink" title="Get datetime properties"></a>Get datetime properties</h3><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">dt = arrow.utcnow()</span><br><span class="line"><span class="comment"># get Python&#x27;s datetime.datetime</span></span><br><span class="line">dt.datetime     <span class="comment"># datetime.datetime(2013, 5, 7, 4, 38, 15, 447644, tzinfo=tzutc())</span></span><br><span class="line">dt.tzinfo       <span class="comment"># tzutc()</span></span><br><span class="line">dt.year</span><br><span class="line">dt.date()       <span class="comment"># datetime.date(2013, 5, 7)</span></span><br><span class="line">dt.time()       <span class="comment"># datetime.time(4, 38, 15, 447644)</span></span><br><span class="line">dt.timetz()     <span class="comment"># datetime.time(22, 4, 50, 202752, tzinfo=tzutc())</span></span><br></pre></td></tr></table></figure>

<h3 id="Replace-some-field-and-shift"><a href="#Replace-some-field-and-shift" class="headerlink" title="Replace some field and shift"></a>Replace some field and shift</h3><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># replace some fields, not change other attribute</span></span><br><span class="line">arw = arrow.utcnow()                    <span class="comment"># 2021-06-17T08:12:37.986011+00:00</span></span><br><span class="line">arw = arw.replace(hour=<span class="number">4</span>, minute=<span class="number">40</span>)    <span class="comment"># 2021-06-17T04:40:37.986011+00:00</span></span><br><span class="line">arw = arw.shift(weeks=+<span class="number">3</span>)               <span class="comment"># 2021-07-08T04:40:37.986011+00:00</span></span><br><span class="line"><span class="comment"># only change timezone, not update other fields, different with convert</span></span><br><span class="line">arw = arw.replace(tzinfo=<span class="string">&#x27;US/Pacific&#x27;</span>)  <span class="comment"># 2021-07-08T04:40:37.986011-07:0</span></span><br></pre></td></tr></table></figure>

<h3 id="Span-and-range-of-times"><a href="#Span-and-range-of-times" class="headerlink" title="Span and range of times"></a>Span and range of times</h3><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 当前time的hour开始及结束, 当前时间: 2021-06-17T22:15:38.970255+00:00</span></span><br><span class="line">arrow.utcnow().span(<span class="string">&#x27;hour&#x27;</span>) <span class="comment"># (&lt;Arrow [2021-06-17T22:00:00+00:00]&gt;, &lt;Arrow [2021-06-17T22:59:59.999999+00:00]&gt;)</span></span><br><span class="line"><span class="comment"># 另一种方法是floor和ceiling, 得出一样的span start和end</span></span><br><span class="line">hour_start = arrow.utcnow().floor(<span class="string">&#x27;hour&#x27;</span>)</span><br><span class="line">hour_end = arrow.utcnow().ceil(<span class="string">&#x27;hour&#x27;</span>)</span><br><span class="line"><span class="comment"># get of range of time spans</span></span><br><span class="line">start = datetime(<span class="number">2013</span>, <span class="number">5</span>, <span class="number">5</span>, <span class="number">12</span>, <span class="number">30</span>)</span><br><span class="line">end = datetime(<span class="number">2013</span>, <span class="number">5</span>, <span class="number">5</span>, <span class="number">17</span>, <span class="number">15</span>)</span><br><span class="line"><span class="keyword">for</span> r <span class="keyword">in</span> arrow.Arrow.span_range(<span class="string">&#x27;hour&#x27;</span>, start, end):</span><br><span class="line">    <span class="built_in">print</span>(r)</span><br><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">(&lt;Arrow [2013-05-05T12:00:00+00:00]&gt;, &lt;Arrow [2013-05-05T12:59:59.999999+00:00]&gt;)</span></span><br><span class="line"><span class="string">(&lt;Arrow [2013-05-05T13:00:00+00:00]&gt;, &lt;Arrow [2013-05-05T13:59:59.999999+00:00]&gt;)</span></span><br><span class="line"><span class="string">(&lt;Arrow [2013-05-05T14:00:00+00:00]&gt;, &lt;Arrow [2013-05-05T14:59:59.999999+00:00]&gt;)</span></span><br><span class="line"><span class="string">(&lt;Arrow [2013-05-05T15:00:00+00:00]&gt;, &lt;Arrow [2013-05-05T15:59:59.999999+00:00]&gt;)</span></span><br><span class="line"><span class="string">(&lt;Arrow [2013-05-05T16:00:00+00:00]&gt;, &lt;Arrow [2013-05-05T16:59:59.999999+00:00]&gt;)</span></span><br><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="comment"># iterate over range of times</span></span><br><span class="line"><span class="keyword">for</span> r <span class="keyword">in</span> arrow.Arrow.<span class="built_in">range</span>(<span class="string">&#x27;hour&#x27;</span>, start, end):</span><br><span class="line">    <span class="built_in">print</span>(<span class="built_in">repr</span>(r))</span><br><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">&lt;Arrow [2013-05-05T12:30:00+00:00]&gt;</span></span><br><span class="line"><span class="string">&lt;Arrow [2013-05-05T13:30:00+00:00]&gt;</span></span><br><span class="line"><span class="string">&lt;Arrow [2013-05-05T14:30:00+00:00]&gt;</span></span><br><span class="line"><span class="string">&lt;Arrow [2013-05-05T15:30:00+00:00]&gt;</span></span><br><span class="line"><span class="string">&lt;Arrow [2013-05-05T16:30:00+00:00]&gt;</span></span><br><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br></pre></td></tr></table></figure>

<h2 id="Ref"><a href="#Ref" class="headerlink" title="Ref"></a>Ref</h2><p><a target="_blank" rel="noopener" href="https://arrow.readthedocs.io/en/latest/">Arrow: Better dates &amp; times for Python</a><br><a target="_blank" rel="noopener" href="https://rdrr.io/cran/anytime/man/iso8601.html">iso8601: Format a Datetime object: ISO 8601, RFC 2822 or RFC 3339</a><br><a target="_blank" rel="noopener" href="https://datatracker.ietf.org/doc/html/rfc3339">RFC 3339</a>    </p>

    </div>

    
    
    

    <footer class="post-footer">

        

          <div class="post-nav">
            <div class="post-nav-item">
                <a href="/2021/05/25/Kubectl-JSON-output-handling-and-JQ/" rel="prev" title="Kubectl JSON output handling and JQ">
                  <i class="fa fa-chevron-left"></i> Kubectl JSON output handling and JQ
                </a>
            </div>
            <div class="post-nav-item">
                <a href="/2022/01/25/Python3-virtual-environment-venv/" rel="next" title="Python3 virtual environment: venv and conda">
                  Python3 virtual environment: venv and conda <i class="fa fa-chevron-right"></i>
                </a>
            </div>
          </div>
    </footer>
  </article>
</div>





<script src="/js/comments.js"></script>
</div>
  </main>

  <footer class="footer">
    <div class="footer-inner">


<div class="copyright">
  &copy; 
  <span itemprop="copyrightYear">2022</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">eliteGoblin</span>
</div>
  <div class="powered-by">由 <a href="https://hexo.io/" class="theme-link" rel="noopener" target="_blank">Hexo</a> & <a href="https://theme-next.js.org/muse/" class="theme-link" rel="noopener" target="_blank">NexT.Muse</a> 强力驱动
  </div>

    </div>
  </footer>

  
  <script src="https://cdn.jsdelivr.net/npm/animejs@3.2.1/lib/anime.min.js"></script>
<script src="/js/utils.js"></script><script src="/js/motion.js"></script><script src="/js/schemes/muse.js"></script><script src="/js/next-boot.js"></script>

  






  





</body>
</html>
